mysql:
  image: 'benchflow/collectors:mysql_dev'
  environment:
    - "KAFKA_HOST=${BENCHFLOW_ENV_MASTER_LOCAL_IP}:${BENCHFLOW_ENV_MASTER_LOCAL_PORT}"
    - KAFKA_TOPIC=mysql
    - MINIO_ALIAS=benchflow
    - "MINIO_HOST=http://${BENCHFLOW_ENV_MINIO_IP}:${BENCHFLOW_ENV_MINIO_PORT}"
    - MINIO_ACCESSKEYID=${BENCHFLOW_ENV_MINIO_ACCESS_KEY}
    - MINIO_SECRETACCESSKEY=${BENCHFLOW_ENV_MINIO_SECRET_KEY}

    - MYSQL_DB_NAME=${BENCHFLOW_BENCHMARK_CONFIG_DB_NAME}
    - TABLE_NAMES=${BENCHFLOW_BENCHMARK_CONFIG_TABLE_NAMES}

    # the IP can be the local IP
    - MYSQL_HOST=${BENCHFLOW_BENCHMARK_BOUNDSERVICE_IP}
    - MYSQL_PORT=${BENCHFLOW_BENCHMARK_CONFIG_DB_PORT}
    - MYSQL_USER=${BENCHFLOW_BENCHMARK_CONFIG_DB_USER}
    - MYSQL_USER_PASSWORD=${BENCHFLOW_BENCHMARK_CONFIG_DB_PASSWORD}

#    - SUT_NAME=${BENCHFLOW_BENCHMARK_CONFIG_SUT_NAME}
#    - SUT_VERSION=${BENCHFLOW_BENCHMARK_CONFIG_SUT_VERSION}

#    - BENCHFLOW_COLLECTOR_NAME=mysql_collector_${BENCHFLOW_BENCHMARK_CONFIG_COLLECTOR_NAME}
    - BENCHFLOW_DATA_NAME=mysql

    # CHECK IF INJECT ENVCONSUL_CONSUL variable
# 192.168.41.105::8080
  expose:
    - 8080
#  extra_hosts:
#    - "lisa1:192.168.41.105"
#    - "master_local:192.168.41.55"
  ports:
    - '8080'

endpoints:
  privatePort: 8080
  stop: /store
